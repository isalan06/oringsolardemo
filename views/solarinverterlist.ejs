<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Solar Demo - Summary</title>
    <link rel="stylesheet" href="stylesheets/solarinverterlist.css">

  </head>
  <body>
    <script src="javascripts/solarinverterlist.js"></script>
    <div class="dashboardadmin">
        <div class="LeftItemList">
            <label class="IconLWhite100"></label>
            <label class="PVTitle">PV監測系統</label>
            <hr class="LineTitle" />
            <div class="NotRectangleSelected"><label class="currentLeftTitle"><a href='/SolarSummary' class="linkPath">場域儀表板</a></label></div>
            <div class="RectangleSelected"><label class="currentLeftTitle">案場設備列表</label></div>
            <div class="NotRectangleSelected"><label class="currentLeftTitle">中控地圖</label></div>
            <div class="NotRectangleSelected"><label class="currentLeftTitle">案場日報</label></div>
            <div class="NotRectangleSelected"><label class="currentLeftTitle">跨案場管理</label></div>
            <div class="NotRectangleSelected"><label class="currentLeftTitle">設備聯網管理</label></div>
            <div class="NotRectangleSelected"><label class="currentLeftTitle">設備註冊</label></div>
            <div class="NotRectangleSelected"><label class="currentLeftTitle">帳號會員管理</label></div>
        </div>
        <div class="UpperTitle">
          <div class="UpperContainer">
            <img src="img/dropdown.svg" class="dropdown">
            <label class="Hi-Admin">Hi, Admin</label>
          </div>
          
        </div>

        <div class="MainContainer">
            <div class="Rect-Main-20">
                <label style="margin-top: 10px; margin-left: 10px;">案場設備列表</label>
                <div id="treeview_container" class="hummingbird-treeview">
                    <ul id="myUL">
                        <% setinverterlistdata.forEach( (row) => { %>
                            <li><span class="caret caret-down" caret-down><%= row['Name'] %></span>
                                <ul class="nested active">
                                    <% row['AreaList'].forEach( (arearow) => { %>
                                        <% if(arearow['Index'] === setarealocationindex) { %>
                                            <li><span class="caret caret-down"><%= arearow['Name'] %></span>
                                                <ul class="nested active">
                                        <% } else { %>
                                            <li><span class="caret"><%= arearow['Name'] %></span>
                                                <ul class="nested">
                                        <% } %>
                                                    <% arearow['InverterList'].forEach((inverterrow) => { %>
                                                        <% var urlString='/SolarInverterList?AreaLocation=' + arearow['Index'].toString() + '&InverterID=' + inverterrow['inverter_id'].toString(); %>
                                                            <% if ((inverterrow['online_status'] === 0) || (inverterrow['inverter_state'] === 4)) { %>
                                                                <li><span class='dot' style="background-color:red;"></span>
                                                            <% } else { %>
                                                                <li><span class='dot' style="background-color:lime;"></span>
                                                            <% } %>
                                                        <% if ((arearow['Index'] === setarealocationindex) && (inverterrow['inverter_id'] === setinverteridindex)) { %>
                                                            <a class="linkPath2" style='height: 20px; background-color: moccasin;' href=<%= urlString %> >Inverter-<%= inverterrow['inverter_id'].toString().padStart(2, "0") %></a></li>
                                                        <% } else { %>
                                                            <a class="linkPath2" style='height: 20px;' href=<%= urlString %> >Inverter-<%= inverterrow['inverter_id'].toString().padStart(2, "0") %></a></li>
                                                        <% } %>
                                                    <% }); %>
                                                </ul>
                                            </li>
                                    <% }); %>
                                </ul>
                            </li>
                        <% }); %>

                    </ul>
                </div>
                <script>
                    var toggler = document.getElementsByClassName("caret");
                    var i;

                    for (i = 0; i < toggler.length; i++) {
                        toggler[i].addEventListener("click", function() {
                        this.parentElement.querySelector(".nested").classList.toggle("active");
                        this.classList.toggle("caret-down");
                    });
}
                </script>
            </div>
            <div class="Rect-Main-21">
                <div class="Rect-Main-22">
                    <label style="width: 180px; height: 30px;"><%= setinverterlistdata[0]['Name'] %></label>
                    <label style="width: 180px; height: 30px;"><%= setinverterlistdata[0]['AreaList'][setarealocationindex-1]['Name'] %></label>
                </div>
                <div class="Rect-Main-22">
    
                </div>
                <div class="Rect-Main-22">
    
                </div>
                <div class="Rect-Main-22">
    
                </div>
                <div class="Rect-Main-22">
    
                </div>
                <div class="Rect-Main-22">
    
                </div>
            </div>
            
        </div>

    </div>
  </body>
</html>